import{r as i,h as o}from"./p-da66e60c.js";import{i as n,g as t,k as s,w as e,v as l,h as d}from"./p-cfe00a47.js";const a=class{constructor(o){i(this,o),this.refItemContent=[],this.getAllLeafColumns=void 0,this.columnsVisibility=void 0,this.showDropdown=void 0,this.menuIconContainerRef=void 0,this.toggleDropdown=void 0,this.maxHeight=void 0,this.columnsVisibilityState=new Map}componentWillLoad(){this.initializeVisibilityState()}applyColumnsVisibility(){this.getAllLeafColumns().forEach((i=>{this.columnsVisibilityState.has(i.id)&&i.toggleVisibility(this.columnsVisibilityState.get(i.id))})),this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}closeDropdown(){this.columnsVisibilityState=new Map,this.toggleDropdown(!this.showDropdown),this.menuIconContainerRef.focus()}handleApplyKeyDown(i){i.key.toLowerCase()!==n||i.shiftKey||this.toggleDropdown(!1)}handleColumnItemKeyDown(i,o){let n;const d=(i,o)=>{this.refItemContent[i]?this.refItemContent[i].focus():d(o?i+1:i-1,o)},a=i.key.toLowerCase();a===t||a===s?this.toggleColumnVisibility(o):a===e?(n=o+1<this.refItemContent.length?o+1:this.refItemContent.length-1,d(n,!0),i.preventDefault()):a===l&&(n=o-1>=0?o-1:0,d(n,!1),i.preventDefault())}handleRefColumnItemContent(i,o,n){n||(this.refItemContent[o]=i)}initializeVisibilityState(){this.getAllLeafColumns().forEach((i=>{var o,n,t,s;const e=null===(n=null===(o=this.columnsVisibility)||void 0===o?void 0:o.requiredColumns)||void 0===n?void 0:n.includes(i.id),l=null===(s=null===(t=this.columnsVisibility)||void 0===t?void 0:t.hiddenColumns)||void 0===s?void 0:s.includes(i.id);!e&&l&&i.toggleVisibility(!1)}))}toggleColumnVisibility(i){const o=this.refItemContent[i].children[0].shadowRoot.children;o[o.length-1].click()}checkIfRequiredColumn(i){var o,n;return null===(n=null===(o=this.columnsVisibility)||void 0===o?void 0:o.requiredColumns)||void 0===n?void 0:n.includes(i)}renderColumnsChecklist(){const i=(i,o)=>({key:i,tabIndex:this.checkIfRequiredColumn(i)?-1:0,ref:n=>{this.handleRefColumnItemContent(n,o,this.checkIfRequiredColumn(i))},onClick:()=>this.toggleColumnVisibility(o),onKeyDown:i=>this.handleColumnItemKeyDown(i,o)});return this.getAllLeafColumns().map(((n,t)=>{var s,e;return o("div",Object.assign({},i(n.id,t),{class:"column-visibility-item"}),o("modus-checkbox",{ariaLabel:n.columnDef.header,label:n.columnDef.header,checked:n.getIsVisible(),onCheckboxClick:i=>this.columnsVisibilityState.set(n.id,i.detail),disabled:null===(e=null===(s=this.columnsVisibility)||void 0===s?void 0:s.requiredColumns)||void 0===e?void 0:e.includes(n.id),stopPropagation:!0}))}))}renderCancelApplyButtons(){return o("div",{class:"column-visibility-buttons-container"},o("modus-button",{size:"small",buttonStyle:"outline",onClick:()=>this.closeDropdown()},"Cancel"),o("modus-button",{size:"small",onClick:()=>this.applyColumnsVisibility(),onKeyDown:i=>this.handleApplyKeyDown(i)},"Apply"))}render(){return o("div",{key:"7357d1c0c3efb961c410ee2191f516673ff1fe31",class:"columns-visibility-menu",style:{maxHeight:this.maxHeight||"60dvh"}},o("div",{key:"156fc3b9d58040a473f888d81f9e6a00021aac3b",class:"column-visibility-header"},this.columnsVisibility.title||"Columns"),o("div",{key:"588ed7b5939c4bced93b593032584c852208cd02",class:"column-visibility-content"},this.renderColumnsChecklist()),this.renderCancelApplyButtons())}};a.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.columns-visibility-menu{display:flex;flex-direction:column}.columns-visibility-menu .column-visibility-header{color:var(--modus-primary, #019aeb);font-size:0.875rem;font-weight:700;line-height:18px;margin:12px;margin-bottom:5px}.columns-visibility-menu .column-visibility-content{overflow:auto}.columns-visibility-menu .column-visibility-item{padding:5px 5px 5px 12px}.columns-visibility-menu .column-visibility-item:focus,.columns-visibility-menu .column-visibility-item:hover{background:var(--modus-group-item-hover-bg, #e0e1e9);outline:none}.columns-visibility-menu .column-visibility-item:last-child{margin-bottom:10px}.columns-visibility-menu .column-visibility-buttons-container{display:flex;justify-content:flex-end;margin-bottom:12px;margin-right:12px}modus-button{padding:12px 0 0 12px}';const r=i=>{var n,t,s;return o("svg",{class:"icon-horizontal-ellipsis "+(i.pressed?"pressed":""),fill:null!==(n=i.color)&&void 0!==n?n:"currentColor",height:null!==(t=i.size)&&void 0!==t?t:16,onClick:i.onClick?()=>i.onClick():null,viewBox:"0 0 24 24",width:null!==(s=i.size)&&void 0!==s?s:16,xmlns:"http://www.w3.org/2000/svg"},o("path",{d:"M10.59 10.59c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm7 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Zm-14 0c-.78.78-.78 2.05 0 2.83s2.05.78 2.83 0 .78-2.05 0-2.83-2.05-.78-2.83 0Z"}))},c=class{constructor(o){i(this,o),this.context=void 0,this.show=!1}handleClickOutside(i){i.composedPath().find((i=>"dropdown-menu-container"===i.className))||(this.show=!1)}handleIconKeyDown(i){const o=i.key.toLowerCase();o===t||o===s?(this.show=!0,i.preventDefault()):o===d&&(this.show=!1,i.preventDefault())}handleDropdownKeyDown(i){i.key.toLowerCase()===d&&(this.show=!1,this.menuIconContainerRef.focus(),i.preventDefault())}render(){const{tableInstance:{getAllLeafColumns:i},toolbarOptions:n,maxHeight:t}=this.context;return o("div",{key:"aab90de74a93625cd6dad906d014cc3afed51693",class:"dropdown-menu-container"},o("div",{key:"e9d0bb984aa0442278b86acee7d5d124232f1cf0",tabIndex:0,class:"dropdown-menu-icon",onClick:()=>this.show=!this.show,onKeyDown:i=>this.handleIconKeyDown(i),ref:i=>this.menuIconContainerRef=i},o(r,{key:"54f8128ab8b0150fe952f159b2f1578941844624",size:"20"})),(null==n?void 0:n.columnsVisibility)&&o("div",{onKeyDown:i=>this.handleDropdownKeyDown(i),class:"dropdown-menu "+(this.show?"visible":"")},o("modus-table-columns-visibility",{getAllLeafColumns:i,columnsVisibility:null==n?void 0:n.columnsVisibility,showDropdown:this.show,menuIconContainerRef:this.menuIconContainerRef,toggleDropdown:i=>this.show=i,maxHeight:t})))}};c.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.dropdown-menu-container{display:inline-block;padding-left:12px;position:relative}.dropdown-menu-container .dropdown-menu-icon{border-radius:3px;cursor:pointer;display:flex;padding:4px}.dropdown-menu-container .dropdown-menu-icon svg{fill:var(--modus-icon-colour, #252a2e)}.dropdown-menu-container .dropdown-menu-icon:hover{background:var(--modus-group-item-hover-bg, #e0e1e9)}.dropdown-menu-container .dropdown-menu{background-color:var(--modus-group-item-bg, #fff);border:1px solid var(--modus-group-item-border-color, #e0e1e9);box-shadow:0 0 4px var(--modus-card-shadow-color, rgba(54, 53, 69, 0.3019607843));display:none;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";position:absolute;right:0;top:28px;width:240px;z-index:99}.dropdown-menu-container .dropdown-menu.visible{display:block}';export{a as modus_table_columns_visibility,c as modus_table_dropdown_menu}