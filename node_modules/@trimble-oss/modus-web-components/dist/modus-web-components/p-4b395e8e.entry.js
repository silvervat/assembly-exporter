import{r as e,c as t,h as i,g as s}from"./p-da66e60c.js";import{M as o}from"./p-17a05821.js";import{T as n}from"./p-cfae6aaa.js";import"./p-dc0826df.js";import"./p-c7b49f87.js";import"./p-913e23f3.js";import"./p-2490b76a.js";const a=class{constructor(s){e(this,s),this.checkboxClick=t(this,"checkboxClick",7),this.itemLabelChange=t(this,"itemLabelChange",7),this.itemClick=t(this,"itemClick",7),this.itemExpandToggle=t(this,"itemExpandToggle",7),this.itemAdded=t(this,"itemAdded",7),this.actionClick=t(this,"actionClick",7),this.SLOT_COLLAPSE_ICON="collapseIcon",this.SLOT_DRAG_ICON="dragIcon",this.SLOT_EXPAND_ICON="expandIcon",this.SLOT_ITEM_ICON="itemIcon",this.SLOT_LABEL="label",this.CustomSlot=e=>{var{name:t,className:s,defaultContent:o,display:n=!0}=e,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i}(e,["name","className","defaultContent","display"]);const d=!this.slots.has(t)&&o;return i("div",Object.assign({},a,{class:`${s||""} ${n?"":"d-none"}`}),i("slot",{name:t,onSlotchange:()=>this.handleDefaultSlotChange()}),d&&o)},this.disabled=void 0,this.draggableItem=void 0,this.droppableItem=void 0,this.editable=void 0,this.label=void 0,this.nodeId=void 0,this.tabIndexValue=0,this.actions=void 0,this.isLastChild=void 0,this.isExpanded=void 0,this.isChildren=void 0,this.childrenIds=void 0,this.forceUpdate={},this.slots=new Map}handleActionBarClick(e){this.actionClick.emit({actionId:e.detail.actionId}),e.stopPropagation(),e.preventDefault()}connectedCallback(){this.options&&this.options.onItemAdd(this.element)}componentDidRender(){this.refLabelInput&&this.editable&&this.refLabelInput.focusInput(),this.element.querySelectorAll("modus-tree-view-item").forEach((e=>{e.setChildren()}))}async setChildren(){this.isChildren=!0}componentWillLoad(){this.itemAdded.emit(this.element),this.handleDefaultSlotChange()}disconnectedCallback(){var e;null===(e=this.options)||void 0===e||e.onItemDelete(this.nodeId)}async focusItem(){this.refItemContent.focus()}async focusCheckbox(){this.refCheckbox&&this.refCheckbox.focusCheckbox()}getChildrenIds(){return Array.from(this.element.children).map((e=>e.nodeId)).filter((e=>e))}handleCheckboxClick(e){if(this.shouldHandleEvent(e)){const{onCheckboxSelection:e,hasItemChecked:t}=this.options;e(this.nodeId),this.checkboxClick.emit(t(this.nodeId))}}handleDefaultKeyDown(e,t){switch(e.code){case"Space":case"Enter":t(),e.preventDefault()}}handleDefaultSlotChange(){const e=this.element.querySelectorAll("[slot]"),t=new Map;let i=e.length!==this.slots.size;e.forEach((e=>{t.set(e.slot,!0),i=!this.slots.get(e.slot)||i})),i&&(this.slots=new Map(t))}handleDrag(e){if(this.shouldHandleEvent(e)){e.preventDefault();const t=this.refItemContent.cloneNode(!0);this.options.onItemDrag(this.nodeId,t,e)}}handleDragKeyDown(e){const t=this.refItemContent.cloneNode(!0);this.options.onItemDragClick(this.nodeId,t,e)}handleExpandToggle(e){if(this.shouldHandleEvent(e)){const{onItemExpandToggle:e,hasItemExpanded:t}=this.options;e(this.nodeId),this.isExpanded=t(this.nodeId),this.itemExpandToggle.emit(t(this.nodeId))}}handleFocus(){const{onItemFocus:e,hasItemFocus:t}=this.options||{};t(this.nodeId)||e(this.nodeId)}handleItemClick(e){if(!e.defaultPrevented&&this.shouldHandleEvent(e)){const{onItemSelection:t,hasItemSelected:i}=this.options;t(this.nodeId,e),this.itemClick.emit(i(this.nodeId))}}handleKeyDownTreeItem(e){if(!e.defaultPrevented)switch(e.code){case"Space":this.handleExpandToggle(e),e.preventDefault(),e.stopPropagation();break;case"Enter":this.draggableItem||(this.handleItemClick(e),e.stopPropagation())}}handleLabelInputClick(e){e.stopPropagation()}handleLabelInputBlur(){this.updateLabelInput()}handleLabelInputKeyDown(e){"Enter"===e.code&&(e.preventDefault(),this.itemLabelChange.emit(this.refLabelInput.value),this.updateLabelInput())}handlePropDisabledChange(e){var t;null===(t=this.options)||void 0===t||t.onItemUpdate({nodeId:this.nodeId,disabled:e})}handlePropNodeIdChange(e,t){var i;null===(i=this.options)||void 0===i||i.onItemUpdate({nodeId:e},{nodeId:t})}handleRefItemContent(e){var t;this.refItemContent=e,null===(t=this.options)||void 0===t||t.onItemUpdate({nodeId:this.nodeId,content:e})}handleTreeSlotChange(){var e,t;const i=this.getChildrenIds(),s=this.childrenIds&&i?this.childrenIds.length!==i.filter((e=>this.childrenIds.includes(e))).length:(null===(e=this.childrenIds)||void 0===e?void 0:e.length)!==(null==i?void 0:i.length);if(this.options){const{onItemUpdate:e,multiCheckboxSelection:s,onCheckboxSelection:o}=this.options;e({nodeId:this.nodeId,children:[...i]}),(null===(t=this.childrenIds)||void 0===t?void 0:t.length)&&this.childrenIds.length!==(null==i?void 0:i.length)&&s&&o(this.nodeId,!0)}this.childrenIds=s?[...i]:this.childrenIds}async initTreeViewItem(e){this.options=Object.assign({},e),this.handleTreeSlotChange(),this.updateComponent(),this.tabIndexValue=this.options.disableTabbing?-1:this.tabIndexValue}rootOptions(){var e;if(this.options){const{checkboxSelection:t,multiCheckboxSelection:i,showSelectionIndicator:s,size:o,borderless:n,getLevel:a,hasItemSelected:d,hasItemDisabled:r,hasItemIndeterminate:l,hasItemExpanded:h,hasItemChecked:c}=this.options,m=d(this.nodeId),b=c(this.nodeId),f=l(this.nodeId),p=h(this.nodeId),u=a(this.nodeId),v=r(this.nodeId),g=s(this.nodeId);return{selected:m,checked:b,indeterminate:f,expanded:p,expandable:Boolean(null===(e=this.childrenIds)||void 0===e?void 0:e.length),level:u,checkboxSelection:t,multiCheckboxSelection:i,size:o,borderless:n,isDisabled:v,selectionIndicator:g}}return{level:1}}shouldHandleEvent(e){return e&&e.stopPropagation(),this.options&&!this.options.hasItemDisabled(this.nodeId)}async updateComponent(){this.forceUpdate=Object.assign({},this.forceUpdate)}updateLabelInput(){this.refLabelInput&&(this.label=this.refLabelInput.value),this.refLabelInput=null,this.editable=!1}render(){var e;const{selected:t,checked:s,indeterminate:a,expanded:d,expandable:r,level:l,checkboxSelection:h,multiCheckboxSelection:c,size:m,borderless:b,isDisabled:f,selectionIndicator:p}=this.rootOptions(),u=Object.assign(Object.assign({"aria-level":l,"aria-selected":t?"true":"false","aria-disabled":f?"true":"false"},r?{"aria-expanded":d?"true":"false"}:{}),{role:"treeitem"}),v=`${n.get(m||"standard")}`,g=f?-1:this.tabIndexValue,k=`tree-item ${this.isExpanded?"expanded":""} ${this.isChildren?"is-children":""} ${this.isLastChild&&!this.isExpanded?"is-last-child":""}${t?"selected":""} ${v} ${f?"disabled":""} ${b?"borderless":""}`,w=`tree-item-group ${v} ${d?"expanded":""}`;return i("li",Object.assign({key:"87165001431895774c2bbe48c2a85c56c913f115"},u,{class:"tree-item-container"+(p?" selected-indicator":"")}),i("div",{key:"2f12d166fbbe3735651fec2af809723a9d3993cf",class:k,onFocus:()=>this.handleFocus(),onClick:e=>this.handleItemClick(e),onKeyDown:e=>this.handleKeyDownTreeItem(e),ref:e=>this.handleRefItemContent(e),tabindex:g},i(this.CustomSlot,{key:"544067c64d2cfa6f7c933c3dc681b862a418ba6e",className:"icon-slot drag-icon"+(this.draggableItem?"":" hidden"),defaultContent:i(o,{icon:"drag_indicator"}),name:this.SLOT_DRAG_ICON,tabIndex:0,onKeyDown:e=>this.handleDragKeyDown(e),onMouseDown:e=>this.handleDrag(e)}),i("div",{key:"64e1af6b2432aa6d9f87b31dcdd0c4b7d8c1e011","aria-disabled":"true",style:{paddingLeft:.5*(l-1)+"rem"}}),i("div",{key:"468f36199d8bccce894b61497925353660d0ed7f",class:"icon-slot"+(r?"":" hidden"),onClick:e=>this.handleExpandToggle(e),onKeyDown:e=>this.handleDefaultKeyDown(e,(()=>this.handleExpandToggle(e))),tabindex:r?g:-1},i(this.CustomSlot,{key:"239a9afcc107b35d07753a660f5be23562511446",className:"inline-flex rotate-right",defaultContent:i(o,{icon:"expand_more",size:"24"}),display:!d,name:this.SLOT_EXPAND_ICON}),i(this.CustomSlot,{key:"cc598195b05ef8d811709fea44b6affa93b5b6db",className:"inline-flex",defaultContent:i(o,{icon:"expand_more",size:"24"}),display:d,name:this.SLOT_COLLAPSE_ICON})),(h||c)&&i("div",{class:"icon-slot"},i("modus-checkbox",{checked:s,disabled:f,indeterminate:a,onClick:e=>this.handleCheckboxClick(e),onKeyDown:e=>this.handleDefaultKeyDown(e,(()=>this.handleCheckboxClick(e))),ref:e=>this.refCheckbox=e})),i(this.CustomSlot,{key:"86d4e37b913e99569216ba4cdf46efd7a1dc4155",className:"icon-slot",name:this.SLOT_ITEM_ICON,display:this.slots.has(this.SLOT_ITEM_ICON)}),i("div",{key:"6ea867fb583e31cc6ba6b3368f1f4c701d71f048",role:"heading","aria-level":l,class:"label-slot"},i(this.CustomSlot,{key:"98658ee52fd64362f5c4c418e39d51e321b6cf3c",role:"button",name:this.SLOT_LABEL,defaultContent:this.editable?i("modus-text-input",{size:"large"==m?"large":"medium",autoFocusInput:!0,tabindex:0,ref:e=>this.refLabelInput=e,value:this.label,onClick:e=>this.handleLabelInputClick(e),onBlur:()=>this.handleLabelInputBlur(),onKeyDown:e=>this.handleLabelInputKeyDown(e)}):this.label})),(null===(e=this.actions)||void 0===e?void 0:e.length)>0&&i("modus-action-bar",{"visible-item-count":3,actions:this.actions})),i("ul",{key:"7ca259e728642481cf342134ed69ad4d1455dbce",class:w,role:"tree"},i("slot",{key:"ef2d1f930c3f96d79f8f66371add710b10fcd1bc",onSlotchange:()=>this.handleTreeSlotChange()})))}get element(){return s(this)}static get watchers(){return{disabled:["handlePropDisabledChange"],nodeId:["handlePropNodeIdChange"]}}};a.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");.tree-item{align-items:center;background-color:var(--modus-tree-view-item-bg, #fff);border:0.0625rem solid var(--modus-tree-view-item-border-color, #e0e1e9);color:var(--modus-tree-view-item-color, #252a2e);cursor:pointer;display:flex;fill:var(--modus-tree-view-item-color, #252a2e);flex-direction:row;font-family:"Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1rem;justify-content:space-between;min-height:2.375rem;width:100%}.tree-item svg path{fill:var(--modus-tree-view-item-color, #252a2e)}.tree-item .icon-chevron-right-thick path,.tree-item .icon-chevron-down-thick path{fill:var(--modus-chevron-color, #90939f)}.tree-item.borderless{border:none}.tree-item.disabled{color:var(--modus-tree-view-item-disabled-color, rgba(37, 42, 46, 0.3019607843));cursor:default !important}.tree-item.disabled svg path{fill:var(--modus-tree-view-item-disabled-color, rgba(37, 42, 46, 0.3019607843))}.tree-item.drop-allow{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-border-color, #217cbb) !important}.tree-item.drop-block{box-shadow:0 -2px 0 var(--modus-tree-view-item-drag-error-border-color, #da212c) !important}.tree-item .d-none{display:none !important}.tree-item .hidden{visibility:hidden}.tree-item:hover:not(.disabled){background-color:var(--modus-tree-view-item-hover-bg, #e0e1e9)}.tree-item .icon-slot{align-items:center;display:flex;justify-content:center;margin-left:0.3rem;width:1.5rem}.tree-item .icon-slot.drag-icon{cursor:grab !important;width:1rem}.tree-item .icon-slot.drag-icon svg{height:1rem;width:1rem}.tree-item .icon-slot .inline-flex{display:inline-flex}.tree-item .icon-slot .rotate-right{transform:rotate(-90deg)}.tree-item .label-slot{overflow:hidden;padding-left:0.5rem;padding-right:0.5rem;text-overflow:ellipsis;white-space:nowrap;width:100%}.tree-item.large{min-height:2.875rem}.tree-item.selected{background-color:var(--modus-tree-view-item-selected-bg, #dcedf9);border-color:var(--modus-tree-view-item-selected-border-color, #dcedf9)}.tree-item.small{font-size:0.75rem;min-height:1.875rem}.tree-item-container{display:flex;flex-direction:column;position:relative}.tree-item-container.selected-indicator::before{box-shadow:inset 0.3rem 0 0 0 var(--modus-tree-view-item-selected-indicator-color, #217cbb);content:"";height:100%;left:0;position:absolute;right:0;width:0.3rem;z-index:5}.tree-item-group{display:none;margin:0;padding:0;width:100%}.tree-item-group.expanded{display:block}.tree-item.is-children{border-bottom:none;border-top:none}.tree-item.expanded{border-bottom:none}.tree-item.is-last-child{border-bottom:0.0625rem solid var(--modus-tree-view-item-border-color, #e0e1e9)}';export{a as modus_tree_view_item}