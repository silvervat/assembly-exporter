import{h as t,r as o,c as e}from"./p-da66e60c.js";import{M as i}from"./p-17a05821.js";import"./p-dc0826df.js";import"./p-c7b49f87.js";import"./p-913e23f3.js";import"./p-2490b76a.js";class l{static convertToTColumns(t){return null==t?void 0:t.map((t=>{var o,e,i,l,n,r,s;return{align:null!==(o=t.align)&&void 0!==o?o:"left",display:null!==(e=t.display)&&void 0!==e?e:t,id:null!==(n=null!==(i=t.id)&&void 0!==i?i:null===(l=t.display)||void 0===l?void 0:l.toLocaleLowerCase())&&void 0!==n?n:t.toLocaleLowerCase(),readonly:null!==(r=t.readonly)&&void 0!==r&&r,width:null!==(s=t.width)&&void 0!==s?s:""}}))}static convertToTRows(t,o){return(null==t?void 0:t.length)&&!Array.isArray(t[0])?t:null==t?void 0:t.map((t=>{var e,i;const l={_id:null!==(e=t._id)&&void 0!==e?e:"",_selected:null!==(i=t._selected)&&void 0!==i&&i};return t.forEach(((t,e)=>{l[o[e].id]=t})),l}))}static sortData(t,o,e){return[...t].sort("asc"===e?(t,e)=>"badge"===t[o]._type?t[o].text>e[o].text?1:-1:"link"===t[o]._type?t[o].display>e[o].display?1:-1:t[o]>e[o]?1:-1:(t,e)=>"badge"===t[o]._type?t[o].text>e[o].text?-1:1:"link"===t[o]._type?t[o].display>e[o].display?-1:1:t[o]>e[o]?-1:1)}}const n=o=>{var e,i,l;return t("svg",{"data-test-id":"iconSortAZ",class:o.pressed?"pressed":"",fill:null!==(e=o.color)&&void 0!==e?e:"currentColor",height:null!==(i=o.size)&&void 0!==i?i:16,onClick:o.onClick,viewBox:"0 0 32 32",width:null!==(l=o.size)&&void 0!==l?l:16,xmlns:"http://www.w3.org/2000/svg"},t("path",{d:"M17.658 14.94a.997.997 0 0 0 1.281-.598L20.155 11h3.69l1.216 3.342a1 1 0 1 0 1.878-.684l-4-11a.999.999 0 0 0-1.878 0l-4 11a1 1 0 0 0 .597 1.282zM22 5.926 23.118 9h-2.236L22 5.926zM26 28h-5.919l6.7-8.375A1.002 1.002 0 0 0 26 18h-8a1 1 0 1 0 0 2h5.919l-6.7 8.375A1.002 1.002 0 0 0 18 30h8a1 1 0 1 0 0-2zm-14.766-5H9V3a1 1 0 1 0-2 0v20H4.766a.86.86 0 0 0-.782.492c-.146.304-.107.655.074.876l3.264 5.085c.165.207.413.326.678.326s.513-.119.709-.369l3.203-4.999a.862.862 0 0 0 .104-.919.86.86 0 0 0-.782-.492z"}))},r=o=>{var e,i,l;return t("svg",{"data-test-id":"iconSortZA",class:o.pressed?"pressed":"",xmlns:"http://www.w3.org/2000/svg",width:null!==(e=o.size)&&void 0!==e?e:16,height:null!==(i=o.size)&&void 0!==i?i:16,fill:null!==(l=o.color)&&void 0!==l?l:"currentColor",onClick:o.onClick,viewBox:"0 0 32 32"},t("path",{d:"M17.658 14.94a.997.997 0 0 0 1.281-.598L20.155 11h3.69l1.216 3.342a1 1 0 1 0 1.878-.684l-4-11a.999.999 0 0 0-1.878 0l-4 11a1 1 0 0 0 .597 1.282zM22 5.926 23.118 9h-2.236L22 5.926zM26 28h-5.919l6.7-8.375A1.002 1.002 0 0 0 26 18h-8a1 1 0 1 0 0 2h5.919l-6.7 8.375A1.002 1.002 0 0 0 18 30h8a1 1 0 1 0 0-2zM8.678 2.547c-.33-.414-.995-.457-1.387.043L4.088 7.589a.862.862 0 0 0-.104.919.86.86 0 0 0 .782.492H7v20a1 1 0 1 0 2 0V9h2.234a.86.86 0 0 0 .782-.492c.146-.304.106-.655-.074-.876L8.678 2.547z"}))},s=o=>{const e="none"!==o.sortState.direction?t("modus-tooltip",{position:"bottom",text:"asc"===o.sortState.direction?"Sort descending":"Remove sort"},t("div",{class:"icon-container"},t("div",{class:"sort-icon"},t("asc"===o.sortState.direction?n:r,{size:"16"})))):null,i=t("div",{style:{width:"16px"}});return t("th",{class:o.sortOptions.canSort?"can-sort":"",onClick:()=>o.onColumnHeaderClick(o.column.id)},t("div",{class:`column-header align-${o.column.align}`},"right"===o.column.align&&o.sortState.columnId!==o.column.id&&i,"right"===o.column.align&&o.sortState.columnId===o.column.id&&"none"===o.sortState.direction&&i,"right"===o.column.align&&o.sortState.columnId===o.column.id&&e,t("div",null,null==(l=o.column.display)?void 0:l.replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())).replace(/\s+/g," ")),"left"===o.column.align&&o.sortState.columnId===o.column.id&&e,"center"===o.column.align&&o.sortState.columnId===o.column.id&&t("div",{style:{position:"relative"}},t("div",{style:{display:"flex",justifyContent:"flex-end",position:"absolute"}},e))));var l},a=o=>t("div",{class:"cell-link",onClick:()=>o.onLinkClick(o.link)},o.link.display),d=o=>t("div",{class:"cell-badge"},t("modus-badge",{color:o.badge.color,type:o.badge.type},o.badge.text)),c=o=>t("modus-dropdown",{"toggle-element-id":`dropdownToggle-${o.rowId}`,"animate-list":o.animateDropdown,customPlacement:{left:-194},showDropdownListBorder:!1},t("div",{class:"row-action",id:`dropdownToggle-${o.rowId}`,slot:"dropdownToggle"},t(i,{icon:"more_vertical",size:"24"})),t("div",{slot:"dropdownList"},t("div",{class:"list-container"},t("div",{class:"items-container"},o.actions.map((e=>t("div",{class:"action-item",onClick:()=>o.onRowActionClick(e._id,o.rowId)},t("div",{class:"action-item-content"},e.display.icon&&t(i,{icon:e.display.icon,size:"16"}),t("div",{class:"display-text"},e.display.text))))))))),h=class{constructor(t){o(this,t),this.cellLinkClick=e(this,"cellLinkClick",7),this.rowDoubleClick=e(this,"rowDoubleClick",7),this.selection=e(this,"selection",7),this.sort=e(this,"sort",7),this.rowActionClick=e(this,"rowActionClick",7),this.classBySize=new Map([["small","size-small"],["large","size-large"]]),this.columns=void 0,this.data=void 0,this.displayOptions={animateRowActionsDropdown:!1,borderless:!0,cellBorderless:!0,rowStripe:!1,size:"large"},this.rowActions=[],this.selectionOptions={canSelect:!1,checkboxSelection:!1},this.sortOptions={canSort:!1,serverSide:!1},this.allSelected=!1,this.sortState={columnId:"",direction:"none"}}dataChanged(t,o){var e;this.originalData=null!==(e=this.originalData)&&void 0!==e?e:l.convertToTRows(o,this.columns)}componentWillLoad(){this.convertColumnsAndRows(),this.updateAllSelected()}componentDidLoad(){this.originalData=l.convertToTRows(this.data,this.columns)}componentWillUpdate(){this.convertColumnsAndRows()}convertColumnsAndRows(){this.columns=l.convertToTColumns(this.columns),this.data=l.convertToTRows(this.data,this.columns)}emitSelection(){this.selection.emit(this.data.filter((t=>t._selected)).map((t=>t._id)))}handleCheckboxClick(t){this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:o._id===t?!o._selected:o._selected}))),this.updateAllSelected(),this.emitSelection()}handleColumnHeaderClick(t){this.sortOptions.canSort&&(this.sortState=Object.assign(Object.assign({},this.sortState),t===this.sortState.columnId?{direction:"asc"===this.sortState.direction?"desc":"desc"===this.sortState.direction?"none":"asc"}:{direction:"asc",columnId:t}),this.sort.emit({columnId:this.sortState.columnId,direction:this.sortState.direction}),this.sortOptions.serverSide||(this.data="none"===this.sortState.direction?this.originalData.map((t=>Object.assign(Object.assign({},t),{_selected:this.data.find((o=>o._id===t._id))._selected}))):l.sortData(this.data,this.sortState.columnId,this.sortState.direction),this.updateAllSelected()))}handleHeaderCheckboxClick(t){this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:t}))),this.emitSelection()}handleRowClick(t){this.selectionOptions.canSelect&&!this.selectionOptions.checkboxSelection&&(this.data=this.data.map((o=>Object.assign(Object.assign({},o),{_selected:o._id===t?!o._selected:o._selected}))),this.emitSelection())}handleRowDoubleClick(t){this.rowDoubleClick.emit(t)}updateAllSelected(){var t;this.allSelected=null===(t=this.data)||void 0===t?void 0:t.every((t=>t._selected))}render(){var o,e,i;const l=`\n      ${this.displayOptions.borderless?"borderless":""}\n      ${this.displayOptions.cellBorderless?"cell-borderless":""}\n      ${this.displayOptions.rowStripe?"row-stripe":""}\n      ${this.classBySize.get(this.displayOptions.size)}\n    `;return t("table",{key:"bb903b6dd2d3c5aa025b858f9a26a66ff1248cac",class:l},t("colgroup",{key:"afd0ce04b4c068839824ddc648e42e6241459752"},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("col",{style:{width:"34px"}}),null===(o=this.columns)||void 0===o?void 0:o.map((o=>t("col",{style:{width:o.width}}))),!!this.rowActions.length&&t("col",{style:{width:"34px"}})),t("thead",{key:"6f9c407f63ff0817314f3d665bde71ac52c51601"},t("tr",{key:"8947edd43bb022c4d4ad350a10c4cd573fbcd2c1"},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("th",null,t("div",{class:"column-header align-center"},t("modus-checkbox",{checked:this.allSelected,onCheckboxClick:t=>this.handleHeaderCheckboxClick(t.detail)}))),null===(e=this.columns)||void 0===e?void 0:e.map((o=>t(s,{column:o,onColumnHeaderClick:t=>this.handleColumnHeaderClick(t),sortOptions:this.sortOptions,sortState:this.sortState}))),!!this.rowActions.length&&t("th",null))),t("tbody",{key:"e9c4b28917968636b3813f9d7561a527ed0a6d86"},null===(i=this.data)||void 0===i?void 0:i.map((o=>{var e;return t("tr",{onClick:()=>this.handleRowClick(o._id),onDblClick:()=>this.handleRowDoubleClick(o._id)},this.selectionOptions.canSelect&&this.selectionOptions.checkboxSelection&&t("td",{class:"align-center "+(o._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t("div",null,t("modus-checkbox",{checked:o._selected,onCheckboxClick:()=>this.handleCheckboxClick(o._id)}))),null===(e=this.columns)||void 0===e?void 0:e.map((e=>{var i,l,n,r;return t("td",{class:`align-${e.align} ${e.readonly?"readonly":""} ${o._selected?"selected":""}`},"link"===(null===(i=o[e.id])||void 0===i?void 0:i._type)&&t(a,{link:o[e.id],onLinkClick:()=>this.cellLinkClick.emit(o[e.id])}),"badge"===(null===(l=o[e.id])||void 0===l?void 0:l._type)&&t(d,{badge:o[e.id]}),!(null===(n=o[e.id])||void 0===n?void 0:n._type)&&(null===(r=o[e.id])||void 0===r?void 0:r.toString()))})),!!this.rowActions.length&&t("td",{class:"align-center "+(o._selected?"selected":""),onClick:t=>t.stopPropagation(),onDblClick:t=>t.stopPropagation()},t(c,{actions:this.rowActions,animateDropdown:this.displayOptions.animateRowActionsDropdown,onRowActionClick:(t,o)=>this.rowActionClick.emit({actionId:t,rowId:o}),rowId:o._id})))}))))}static get watchers(){return{data:["dataChanged"]}}};h.style='@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700");table{border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;border-collapse:collapse;width:100%}table th{background-color:var(--modus-table-header-bg, #f1f1f6);border:0.0625rem var(--modus-table-header-border-color, #b7b9c3) solid;color:var(--modus-table-header-color, #464b52);font-size:0.875rem;font-weight:600;min-height:3rem}table th.can-sort{cursor:pointer}table th .column-header{display:flex;flex-direction:row;justify-content:center;min-height:1.25rem;padding:0 0.5rem}table th .column-header.align-left,table th .column-header.align-right{justify-content:space-between}table th .column-header.align-center{justify-content:center}table th .column-header .icon-container{align-items:center;display:flex;height:1rem;justify-content:center}table th .column-header .icon-container .sort-icon{border-radius:0.25rem;display:flex;padding:0.25rem}table th .column-header .icon-container .sort-icon:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}table th .column-header .icon-container .sort-icon:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}table th .column-header .icon-container .sort-icon:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}table th .column-header .icon-container .sort-icon:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}table th .column-header .icon-container .sort-icon svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}table tr{color:var(--modus-table-color, #464b52);font-size:0.875rem;height:3rem}table tr td{background-color:var(--modus-table-bg, #fff);border:0.0625rem var(--modus-table-border-color, #b7b9c3) solid;padding:0 0.5rem}table tr td.align-center{text-align:center}table tr td.align-center div{display:flex;height:100%;justify-content:center;width:100%}table tr td.align-left{text-align:left}table tr td.align-right{text-align:right}table tr td.readonly{background-color:var(--modus-table-readonly-bg, #e0e1e9);color:var(--modus-table-readonly-color, #464b52)}table tr td.selected{background-color:var(--modus-table-selected-bg, #dcedf9)}table tr td .cell-link{color:var(--modus-link-color, #217cbb);cursor:pointer;display:inline-block;font-weight:600}table tr td .cell-link:hover{text-decoration:underline}table tr td .cell-badge{align-items:center;display:flex;justify-content:center}table.borderless{border:none !important}table.cell-borderless th,table.cell-borderless td{border:none !important}table.row-stripe tr{border-bottom:0.0625rem var(--modus-table-border-color, #b7b9c3) solid}table.size-small th,table.size-small tr{height:2rem}modus-dropdown .row-action{border-radius:50%;cursor:pointer;padding:0.125rem;transition:background-color 0.15s ease-in-out}modus-dropdown .row-action svg{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .row-action:hover{background-color:var(--modus-btn-icon-only-dark-hover-bg, #e0e1e9)}modus-dropdown .row-action:hover svg path{fill:var(--modus-btn-icon-only-dark-hover-color, #353a40)}modus-dropdown .row-action:active{background-color:var(--modus-btn-icon-only-dark-active-bg, #cbcdd6)}modus-dropdown .row-action:active svg path{fill:var(--modus-btn-icon-only-dark-active-color, #2b2a37)}modus-dropdown .list-container{position:relative;top:-6px}modus-dropdown .list-container .items-container{display:inline-block;position:sticky;width:200px}modus-dropdown .list-container .items-container .action-item{height:1.5rem;padding:0.5rem;text-align:left;user-select:none;width:200px}modus-dropdown .list-container .items-container .action-item .action-item-content{align-items:center;background-color:var(--modus-list-item-bg, #fff);border:0.0625rem solid var(--modus-list-item-border-color, #e0e1e9);color:var(--modus-list-item-color, #252a2e);display:flex;height:1.5rem;justify-content:flex-start;overflow:hidden;padding:0.5rem 1rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg{margin-right:0.5rem}modus-dropdown .list-container .items-container .action-item .action-item-content svg path{fill:var(--modus-btn-icon-only-dark-color, #252a2e)}modus-dropdown .list-container .items-container .action-item .action-item-content .display-text{display:block;font-size:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}modus-dropdown .list-container .items-container .action-item:hover .action-item-content{background-color:var(--modus-list-item-hover-bg, #e0e1e9)}';export{h as modus_data_table}